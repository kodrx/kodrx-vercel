
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Historial de Recetas - Médico</title>
  <link rel="stylesheet" href="/estilos/global.css" />
  <script src="/componentes/header.js" defer></script>
  <style>
    body { font-family: 'Poppins', sans-serif; margin: 0; padding: 1rem; background: #f8f9fc; }
    h1 { color: #123f91; text-align: center; margin-bottom: 1rem; }
    .contenedor { max-width: 800px; margin: auto; }
    .acordeon { background: white; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 0.5rem; overflow: hidden; }
    .acordeon-header { background: #123f91; color: white; padding: 0.75rem 1rem; cursor: pointer; font-weight: 500; display: flex; justify-content: space-between; align-items: center; }
    .acordeon-body { display: none; padding: 1rem; background: #fff; border-top: 1px solid #ddd; }
    .acordeon-body p { margin: 0.3rem 0; }
    .acordeon.open .acordeon-body { display: block; }
    .acordeon.open .acordeon-header::after { content: "▲"; }
    .acordeon-header::after { content: "▼"; font-size: 0.8rem; }
    a.boton-ver { background: #2e6fd6; color: white; padding: 0.4rem 0.8rem; border-radius: 4px; text-decoration: none; font-size: 0.85rem; margin-top: 0.5rem; display: inline-block; }
  </style>
  <style>
  .buscador-wrap{
    display:flex; justify-content:center; align-items:center; gap:8px;
    margin:1rem auto; max-width:520px; padding:0 .5rem;
  }
  /* blindaje contra global.css */
  .buscador-wrap #buscador{
    flex:1 1 auto;
    width:100% !important;
    max-width:400px !important;
    min-width:260px;
    padding:.65rem 1rem;
    font-size:1rem; line-height:1.2;
    border-radius:10px;
    border:1px solid #cfd6e3 !important;
    background:#fff !important;
    color:#0b1b2b !important;
    caret-color:#0b5bd3;
    box-sizing:border-box;
  }
  .buscador-wrap #buscador::placeholder{ color:#8a94a6; }
  .buscador-wrap #buscador:focus{
    outline:2px solid #2e6fd6; outline-offset:2px;
    border-color:#2e6fd6 !important;
  }

  .buscador-wrap #btnBuscar{
    background:#2e6fd6; color:#fff;
    border:none; border-radius:10px;
    padding:.65rem 1.1rem;
    font-weight:600; cursor:pointer;
    transition:filter .15s ease;
    white-space:nowrap;
  }
  .buscador-wrap #btnBuscar:hover{ filter:brightness(0.95); }

  @media (max-width:480px){
    .buscador-wrap{ max-width:100%; }
    .buscador-wrap #buscador{ min-width:0; }
  }
</style>

</head>
<body>
  <h1> Historial de Recetas Emitidas</h1>
  <br>



<div class="buscador-wrap">
  <input type="text" id="buscador" placeholder="Buscar paciente...">
  <button id="btnBuscar">Buscar</button>
    <button id="btnVolver" class="btn ghost">Regresar</button>
</div>




  <div class="contenedor" id="historial"></div>
  <script type="module" src="/medico/historialMedico.js"></script>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const q = document.getElementById('buscador');
  const b = document.getElementById('btnBuscar');
  if(!q || !b) return;

  function go(){
    const v = q.value.trim();
    if(!v){ q.focus(); return; }
    const u = new URL('/medico/resultados.html', location.origin);
    u.searchParams.set('q', v);
    location.href = u.href;
  }
  q.addEventListener('keydown', e => { if(e.key === 'Enter') go(); });
  b.addEventListener('click', go);
});
</script>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const btn = document.getElementById('btnRegresar');
  if(btn){
    btn.addEventListener('click', ()=>{
      if (history.length > 1) history.back();
      else window.location.href = '/'; // fallback si no hay historial
    });
  }
});
</script>

</body>
</html>
