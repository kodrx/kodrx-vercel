<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Panel MÃ©dico | KodRx</title>
  <link rel="stylesheet" href="/estilos/global.css" />
</head>
<body>
  <header class="header">
    <img src="/assets/logo.png" alt="KodRx Logo" class="logo" />
    <h1>Panel MÃ©dico</h1>
  </header>

  <main>
    <section>
      <button onclick="nuevaReceta()">âž• Nueva receta</button>
      <button onclick="window.location.href='historial.html'">ðŸ“‹ Historial</button>
      <button onclick="window.location.href='https://kodrx.app/public/verificar.html'">âœ… Verificar en blockchain</button>
      <button onclick="window.location.href='#'">ðŸ§  Acceder IA clÃ­nica</button>
      <button onclick="cerrarSesion()">ðŸ”’ Cerrar sesiÃ³n</button>
    </section>

    <form id="generarRecetaForm" class="form-login">
      <h2>Generar nueva receta</h2>

      <label for="nombrePaciente">Nombre del paciente:</label>
      <input type="text" id="nombrePaciente" required>

      <label for="edad">Edad:</label>
      <input type="number" id="edad" required>

      <label for="sexo">Sexo:</label>
      <select id="sexo">
        <option value="">Seleccionar</option>
        <option value="Masculino">Masculino</option>
        <option value="Femenino">Femenino</option>
        <option value="Otro">Otro</option>
      </select>

      <label for="peso">Peso (kg):</label>
      <input type="number" id="peso" step="0.1">

      <label for="talla">Talla (m):</label>
      <input type="number" id="talla" step="0.01">

      <label for="imc">IMC:</label>
      <input type="text" id="imc" readonly>

      <label for="presion">PresiÃ³n arterial:</label>
      <input type="text" id="presion">

      <label for="temperatura">Temperatura (Â°C):</label>
      <input type="number" id="temperatura" step="0.1">

      <label for="observaciones">Observaciones:</label>
      <textarea id="observaciones"></textarea>

      <label for="diagnostico">DiagnÃ³stico:</label>
      <textarea id="diagnostico"></textarea>

      <div id="medicamentosContainer"></div>
      <button id="agregarMedicamentoBtn" type="button">+ Agregar medicamento</button>

      <button type="submit">Generar receta</button>
    </form>

    <div id="qrContainer" style="margin-top: 20px;"></div>
  </main>

  <!-- QR global -->
<script src="/js/qrcode.min.js"></script>

  <!-- Firebase y script -->
  <script type="module" src="/firebase-init.js"></script>
  <script type="module" src="/medico/panel-medico-master.js"></script>

  <!-- CÃ¡lculo automÃ¡tico de IMC -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const peso = document.getElementById("peso");
      const talla = document.getElementById("talla");
      const imc = document.getElementById("imc");

      function calcularIMC() {
        const p = parseFloat(peso.value);
        const t = parseFloat(talla.value);
        if (p > 0 && t > 0) {
          imc.value = (p / (t * t)).toFixed(2);
        }
      }

      peso.addEventListener("input", calcularIMC);
      talla.addEventListener("input", calcularIMC);
    });
  </script>

</body>
</html>
