<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Verificar receta</title>
</head>
<body>
  <h2>Verificar receta</h2>
  <div id="receta">Cargando receta...</div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBIjaOe4HcGNDk0xrqen8etBv0RyjyOJHw",
      authDomain: "kodrx-105b9.firebaseapp.com",
      projectId: "kodrx-105b9",
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const params = new URLSearchParams(window.location.search);
    const recetaId = params.get("id");

    async function cargarReceta() {
      const recetaRef = doc(db, "recetas", recetaId);
      const recetaSnap = await getDoc(recetaRef);

      if (!recetaSnap.exists()) {
        document.getElementById("receta").innerText = "Receta no encontrada.";
        return;
      }

      const receta = recetaSnap.data();
      const contenedor = document.getElementById("receta");

      contenedor.innerHTML = `
        <p><strong>MÃ©dico:</strong> ${receta.medicoNombre || "No disponible"}</p>
        <p><strong>Paciente:</strong> ${receta.nombrePaciente}</p>
        <p><strong>Edad:</strong> ${receta.edad}</p>
        <p><strong>Observaciones:</strong> ${receta.observaciones}</p>
        <h4>Medicamentos:</h4>
        <ul>
          ${receta.medicamentos.map(med =>
            `<li>${med.nombre} - ${med.dosis} - ${med.duracion}</li>`
          ).join("")}
        </ul>
      `;
    }

    cargarReceta();
  </script>
</body>
</html>
