<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Verificador de recetas</title>
</head>
<body>
  <h2>Verificador de recetas</h2>
  <button onclick="iniciarEscaneo()">ðŸ“· Escanear receta con cÃ¡mara</button>
  <input type="text" id="recetaIdInput" placeholder="O ingresar ID manual">
  <button onclick="verificarReceta()">Verificar</button>

  <div id="receta" style="margin-top: 20px;">Esperando receta...</div>

  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBIjaOe4HcGNDk0xrqen8etBv0RyjyOJHw",
      authDomain: "kodrx-105b9.firebaseapp.com",
      projectId: "kodrx-105b9",
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function verificarReceta() {
      const recetaId = document.getElementById("recetaIdInput").value.trim();
      if (!recetaId) return alert("Ingresa un ID");

      const docRef = db.collection("recetas").doc(recetaId);
      const docSnap = await docRef.get();

      const contenedor = document.getElementById("receta");

      if (!docSnap.exists) {
        contenedor.innerText = "Receta no encontrada.";
        return;
      }

      const receta = docSnap.data();

      contenedor.innerHTML = `
        <p><strong>MÃ©dico:</strong> ${receta.medicoNombre || "No disponible"}</p>
        <p><strong>Paciente:</strong> ${receta.nombrePaciente}</p>
        <p><strong>Edad:</strong> ${receta.edad}</p>
        <p><strong>Observaciones:</strong> ${receta.observaciones}</p>
        <h4>Medicamentos:</h4>
        <ul>
          ${receta.medicamentos.map(med =>
            `<li>${med.nombre} - ${med.dosis} - ${med.duracion}</li>`
          ).join("")}
        </ul>
      `;
    }

    function iniciarEscaneo() {
      alert("Funcionalidad de escaneo QR activa â€” este bloque se conecta al lector implementado en otra parte.");
      // Tu cÃ³digo de lector QR insertado previamente aquÃ­
    }
  </script>
</body>
</html>
